<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8"/>
    <title>Dashboard â€” Dev Coins</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-dark p-3">
    <div class="container d-flex justify-content-between">
        <span class="navbar-brand">ğŸ’° Dev Coins</span>
        <div class="text-white" id="userInfo"></div>
        <button class="btn btn-danger btn-sm" onclick="logout()">Sair</button>
    </div>
</nav>

<div class="container mt-4">
    <h2>ğŸ‘¨â€ğŸ’» Lista de Devs</h2>

    <div id="devList" class="mt-3">Carregando...</div>
</div>

<script src="/auth.js"></script>
<script>
    verificarLoginOuRedirecionar();
    carregarUsuarioNaNavbar();
    carregarDevs();

    async function carregarDevs() {
        const resposta = await authFetch("/api/devs");

        if (!resposta.ok) {
            document.getElementById("devList").innerHTML = "Erro ao carregar devs";
            return;
        }

        const devs = await resposta.json();

        document.getElementById("devList").innerHTML = devs.map(dev => `
            <div class="card mt-2 p-3 shadow-sm">
                <strong>${dev.nome}</strong>
                <span class="ms-2">ğŸª™ ${dev.moedas}</span>
            </div>
        `).join("");
    }
</script>

</body>
</html>
